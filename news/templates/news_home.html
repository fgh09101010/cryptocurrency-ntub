{% extends 'base.html' %}

{% block title %}Êñ∞ËÅû{% endblock %}

{% block content %}
<style>
    h1 {
        font-size: 32px;
        color: #2E6695; /* Ê®ôÈ°å‰ΩøÁî®Ê∑±ËóçËâ≤ */
        margin-bottom: 40px;
        text-align: center;
        font-weight: bold;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Âç°ÁâáÊ®£Âºè */
    .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
        overflow: hidden;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }

    .card-title {
        font-size: 18px;
        font-weight: 600;
        color: #222;
        line-height: 1.4;
    }

    .card-title:hover {
        color: #2E6695;
    }

    .card-text {
        font-size: 15px;
        color: #555;
    }

    .card-footer {
        background-color: #f8f9fa;
        border-top: none;
        font-size: 14px;
        color: #666;
    }

    .button-bu {
        background: linear-gradient(90deg, #2E6695, #4a90e2);
        border: none;
        color: #fff !important;
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 14px;
        transition: background 0.3s;
        text-decoration: none;
    }

    .button-bu:hover {
        background: linear-gradient(90deg, #26547C, #357ABD);
        color: #fff;
    }

    /* Êü•ÁúãÊõ¥Â§öÊåâÈàï */
    .btn-test {
        display: inline-block;
        background-color: #eab31a;
        color: #fff;
        padding: 14px 40px;
        border-radius: 25px;
        font-size: 16px;
        font-weight: bold;
        text-decoration: none;
        transition: background-color 0.3s ease, transform 0.3s ease;
        box-shadow: 0 4px 10px rgba(234, 179, 26, 0.4);
    }

    .btn-test:hover {
        background-color: #f09f19;
        transform: scale(1.05);
        color: #fff;
    }

    .btn-test:focus {
        outline: none;
    }
</style>

<div class="container mt-4">
    <h1 class="mb-4">ÊúÄÊñ∞Êñ∞ËÅû</h1>

    <div class="row">
        {% for article in all_articles|slice:"0:3" %}
        <div class="col-md-4 mb-4 d-flex align-items-stretch">
            <div class="card h-100 d-flex flex-column">
                {% if article.image_url %}
                    <img class="card-img-top" src="{{ article.image_url }}" alt="Êñ∞ËÅûÂúñÁâá"
                        style="width: 100%; height: 220px; object-fit: cover;">
                {% elif article.website.icon_url %}
                    <a href="{{ article.url }}" target="_blank">
                        <img src="{{ article.website.icon_url }}" alt="Á∂≤Á´ô Logo" class="img-fluid rounded"
                            style="width: 100%; height: 220px; object-fit: contain;">
                    </a>
                {% else %}
                    <div class="d-flex justify-content-center align-items-center" style="height: 220px; background-color: #f2f2f2;">
                        <span class="text-muted small">ÁÑ°ÂúñÁâá</span>
                    </div>
                {% endif %}

                <div class="card-body d-flex flex-column">
                    <h4 class="card-title mb-2 text-start" style="min-height: 4em;"><a href="{% url 'news_detail' article_id=article.id %}">{{ article.title }}</a></h4>

                    <p class="card-text flex-grow-1 text-start" style="
                        max-height: 4.5em;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        display: -webkit-box;
                        -webkit-line-clamp: 3;
                        -webkit-box-orient: vertical;">
                        {% if article.summary and article.summary != "" %}
                            {{ article.summary }}
                        {% else %}
                            {{ article.content }}
                        {% endif %}
                    </p>

                    <div class="d-flex justify-content-center align-items-center mt-3">
                        <a href="{% url 'news_detail' article_id=article.id %}" class="btn-sm button-bu">Èñ±ËÆÄÊõ¥Â§ö...</a>
                    </div>
                </div>

                <div class="card-footer text-center">
                    {% if article.sentiment_score is not None %}
                        {% if article.sentiment_score > 0.3 %}
                            üòÑ Ê≠£Èù¢ ({{ article.sentiment_score|floatformat:2 }})
                        {% elif article.sentiment_score < -0.3 %}
                            üòî Ë≤†Èù¢ ({{ article.sentiment_score|floatformat:2 }})
                        {% else %}
                            üòê ‰∏≠Á´ã ({{ article.sentiment_score|floatformat:2 }})
                        {% endif %}
                    {% else %}
                        ‚ùì Â∞öÊú™ÈÄ≤Ë°åÂàÜÊûê
                    {% endif %}
                    <span class="mx-2">‚Ä¢</span>
                    {{ article.time|date:"Y-m-d H:i" }}
                    <span class="mx-2">‚Ä¢</span>
                    <a href="{{ article.website.url }}" target="_blank" class="text-muted small text-decoration-none">
                        Ë≥áÊñô‰æÜÊ∫êÔºö{{ article.website.name }}
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-4">
        <a href="{% url 'news_list' %}" class="btn-test">Êü•ÁúãÊõ¥Â§öÊñ∞ËÅû...</a>
    </div>
</div>
{% endblock %}
